(function(){const DEFAULTS={enableEffect:!0,accentColor:'#00ffea',glowStrength:70,minLinkSize:'30x12'};function parseSize(e){const t=/^(\d{1,3})x(\d{1,3})$/.exec((e||'').toLowerCase());return t?{w:parseInt(t[1],10),h:parseInt(t[2],10)}:{w:30,h:12}}let state={...DEFAULTS};function applyEffect(){const e=state.accentColor||DEFAULTS.accentColor,t=Math.max(0,Math.min(100,+state.glowStrength||DEFAULTS.glowStrength))/100;if(!state.enableEffect){for(const e of document.querySelectorAll('.bh-portal'))e.classList.remove('bh-portal');const e=document.getElementById('bh-portal-style');return void(e&&e.remove())}if(!document.getElementById('bh-portal-style')){const n=document.createElement('style');n.id='bh-portal-style',n.textContent=`.bh-portal{position:relative;display:inline;z-index:0}.bh-portal>.bh-wrap{position:relative;display:inline-block;padding:2px 8px;border-radius:16px;box-shadow:0 0 0 calc(2px + ${2*t}px) ${e}e6,inset 0 0 ${14+20*t}px ${e}80,0 0 ${28+28*t}px ${e}a6,0 0 ${40+40*t}px ${e}8c;animation:bh-pulse ${1.2-.4*t}s ease-in-out infinite alternate}.bh-portal:before{content:'';position:absolute;inset:-10px;border-radius:20px;pointer-events:none;z-index:-1;background:radial-gradient(circle at 50% 50%, ${e}33, transparent 60%);filter:blur(${6+8*t}px)}@keyframes bh-pulse{from{filter:hue-rotate(0deg) brightness(1)}to{filter:hue-rotate(20deg) brightness(1.12)}}`,document.documentElement.appendChild(n)}const{w:n,h:o}=parseSize(state.minLinkSize);!function(e=document){for(const t of e.querySelectorAll('a')){const e=t.getBoundingClientRect();if(e.width<n||e.height<o)continue;if(!t.querySelector('.bh-wrap')){const e=document.createElement('span');for(;t.firstChild;)e.appendChild(t.firstChild);e.className='bh-wrap',t.appendChild(e)}t.classList.add('bh-portal')}}();new MutationObserver(e=>e.forEach(e=>e.addedNodes.forEach(e=>{1===e.nodeType&&function(e=document){for(const t of e.querySelectorAll('a')){const e=t.getBoundingClientRect();if(e.width<n||e.height<o)continue;if(!t.querySelector('.bh-wrap')){const e=document.createElement('span');for(;t.firstChild;)e.appendChild(t.firstChild);e.className='bh-wrap',t.appendChild(e)}t.classList.add('bh-portal')}}(e)}))).observe(document.documentElement,{subtree:!0,childList:!0})}async function loadAndApply(){try{const e=await chrome.storage.sync.get(DEFAULTS);state={...DEFAULTS,...e}}catch(e){state={...DEFAULTS}}applyEffect()}try{chrome.runtime.onMessage.addListener(e=>{e&&'BH_SETTINGS_UPDATED'===e.type&&loadAndApply()})}catch(e){}location.hostname.endsWith('developer.chrome.com')&&loadAndApply()})();